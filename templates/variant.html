{% extends "base.html" %}

{% block content %}
<nav aria-label="breadcrumb" class="mb-3">
    <ol class="breadcrumb bg-light rounded p-3 mb-1">
        <li class="breadcrumb-item"><a href="{{ base_url }}/">Home</a></li>
        <li class="breadcrumb-item"><a href="{{ base_url }}/rockets.html">Rockets</a></li>
        <li class="breadcrumb-item"><a href="{{ base_url }}/rocket/{{ rocket.slug }}.html">{{ rocket.name }}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ variant.name }}</li>
    </ol>
</nav>

<div class="card mb-3 p-3">
    <div class="row g-3 align-items-start">
        <div class="col-12 col-md-4">
            <figure class="figure w-100">
                {% if rocket.image_url %}
                <img src="{{ rocket.image_url }}" class="figure-img img-fluid rounded" alt="{{ rocket.name }}">
                {% else %}
                <div class="bg-secondary text-white d-flex align-items-center justify-content-center figure-img w-100"
                    style="height:400px; border-radius:0.25rem;">
                    No Image
                </div>
                {% endif %}
                <figcaption class="figure-caption text-center mt-2">{{ rocket.name }}</figcaption>
            </figure>
        </div>

        <div class="col-12 col-md-8">
            <div class="card mb-5">
                <div class="card-header py-2 fs-5 fw-bold">
                    Variant Informations
                </div>
                <div class="card-body p-2">
                    <ul class="list-group list-group-flush mb-0">
                        <li class="list-group-item py-1"><strong>Manufacturer:</strong> {{ variant.manufacturer }}</li>
                        <li class="list-group-item py-1"><strong>First Flight:</strong> {{ variant.first_flight }}</li>
                        <li class="list-group-item py-1"><strong>Height:</strong> {{ variant.rocket_height }} m</li>
                        <li class="list-group-item py-1"><strong>Stages:</strong> {{ variant.stages }}</li>
                        <li class="list-group-item py-1"><strong>Strap-ons:</strong> {{ variant.strap_ons }}</li>
                        <li class="list-group-item py-1"><strong>Liftoff Thrust:</strong> {{ variant.liftoff_thrust }} kN</li>
                        <li class="list-group-item py-1"><strong>Payload to LEO:</strong> {{ variant.payload_LEO }} kg</li>
                        <li class="list-group-item py-1"><strong>Payload to GTO:</strong> {{ variant.payload_GTO }} kg</li>
                        <li class="list-group-item py-1"><strong>Price:</strong> ${{ variant.price }}</li>
                        <li class="list-group-item py-1"><strong>Baseline Rocket:</strong> 
                            <a href="{{ base_url }}/rocket/{{ rocket.slug }}.html">{{ rocket.name }}</a>
                        </li>
                    </ul>
                </div>
            </div>

            {% if variant.remarks %}
            <div class="card mb-3">
                <div class="card-header py-2 fw-bold">Remarks</div>
                <div class="card-body p-2">
                    <p class="mb-0">{{ variant.remarks }}</p>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="card mb-3">
    <div class="card-header py-2 fs-4 fw-bold">
        {{ rocket.name }} launches for {{ variant.name }} (total: {{ variant.missions | default(0) }})
    </div>
    <div class="card-body p-2">
        <div class="list-group list-group-flush mb-0">
            {% for launch in variant.launches | default([]) %}
            <a href="{{ base_url }}/launch/{{ launch.id }}" class="list-group-item list-group-item-action py-1 text-decoration-none">
                <div class="d-flex align-items-center">
                    <div class="me-3" style="width: 110px; flex-shrink: 0;">
                        <span>{{ launch.date }}</span>
                    </div>
                    <div class="flex-grow-1">
                        <strong>{{ launch.name }}</strong><br>
                        <small>Variant: {{ launch.variant }}</small>
                    </div>
                    <div class="ms-3">
                        <span class="badge 
                            {% if launch.status == 'Success' %}bg-success
                            {% elif launch.status == 'Partial Failure' %}bg-warning
                            {% else %}bg-danger{% endif %}
                            text-white py-2 px-2">{{ launch.status }}</span>
                    </div>
                </div>
            </a>
            {% else %}
            <div class="text-muted p-2">No launches available for this variant.</div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}
